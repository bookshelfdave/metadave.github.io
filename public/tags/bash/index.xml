<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bash on Dave Parfitt&#39;s blog</title>
    <link>http://www.metadave.net/tags/bash/index.xml</link>
    <description>Recent content in Bash on Dave Parfitt&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2016 Dave Parfitt</copyright>
    <atom:link href="http://www.metadave.net/tags/bash/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>A Kubernetes-aware bash prompt</title>
      <link>http://www.metadave.net/post/kubernetes_bash_prompt/</link>
      <pubDate>Fri, 06 Jan 2017 09:48:32 -0500</pubDate>
      
      <guid>http://www.metadave.net/post/kubernetes_bash_prompt/</guid>
      <description>&lt;p&gt;If you manage multiple Kubernetes deployments, this little trick can show you the current Kubernetes context as part of your bash prompt.&lt;/p&gt;

&lt;p&gt;Edit your &lt;code&gt;~/.bash_profile&lt;/code&gt; or &lt;code&gt;~/.bashrc&lt;/code&gt; with the following:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function kube_context() {
    # could have used $?, but it was easier with a string compare
    local ctx=$(kubectl config current-context 2&amp;gt;&amp;amp;1)
    if [ &amp;quot;${ctx}&amp;quot; != &amp;quot;error: current-context is not set&amp;quot; ]; then
        echo -n &amp;quot;&amp;lt;${ctx}&amp;gt; &amp;quot;
    fi
}

Blue=&#39;\e[0;34m&#39;         # Blue
White=&#39;\e[0;37m&#39;        # White
BRed=&#39;\e[1;31m&#39;         # Red
IWhite=&#39;\e[0;97m&#39;       # White
LightBlue=&#39;\e[1;34m&#39;

PS1=&amp;quot;\[$Blue\]\t\[$BWhite\]\[$LightBlue\] \$(kube_context)\[$BRed\]\[$BRed\]\w\[\033[m\]\[$IWhite\]\$(__git_ps1)\[$White\]\$ &amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The snippet above yields the following prompt:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://i.imgur.com/xk7a98Y.png&#34; alt=&#34;alt&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The key part of the &lt;code&gt;PS1&lt;/code&gt; value above is &lt;code&gt;\$(kube_context)&lt;/code&gt;, which &lt;em&gt;must&lt;/em&gt; start with the &lt;code&gt;\&lt;/code&gt; character, or it won&amp;rsquo;t refresh after it&amp;rsquo;s initial run.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Habitat</title>
      <link>http://www.metadave.net/project/habitat/</link>
      <pubDate>Fri, 01 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>http://www.metadave.net/project/habitat/</guid>
      <description>&lt;p&gt;Habitat is a new approach to automation that focuses on the application instead of the infrastructure it runs on. With Habitat, the apps you build, deploy, and manage behave consistently in any runtime — bare metal, VMs, containers, and PaaS. You&amp;rsquo;ll spend less time on the environment and more time building features.&lt;/p&gt;

&lt;p&gt;Habitat is an open source project, and we’d love for you to get involved.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>